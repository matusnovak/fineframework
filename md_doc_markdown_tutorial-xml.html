<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8">
<meta name="description" content="FineFramework (FFW) is an open source framework written in C++ designed for developing applications." />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
<link rel="stylesheet" type="text/css" href="material.css">
<link rel="stylesheet" type="text/css" href="docs.css">
<script src="jquery.js"></script>
<script src="material.min.js"></script>
<script src="dynsections.js"></script>
<title>FineFramework - Documentation</title>
</head>
<body>
  <!-- Always shows a header, even in smaller screens. -->
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
	  <header class="mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600 is-casting-shadow">
		<div class="mdl-layout__header-row">
		  <!-- Title -->
		  <span class="mdl-layout-title"><a href="index.html"><img src="logo.png"></a></span>
		  <!-- add spacer, to align navigation to the right -->
		  <div class="mdl-layout-spacer"></div>
		  <!-- Navigation. We hide it in small screens. -->
		  <nav class="mdl-navigation mdl-layout--large-screen-only">
			<a class="mdl-navigation__link" href="index.html">Home</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_documentation.html">Documentation</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_tutorials.html">Tutorials</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_examples.html">Examples</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_faq.html">F.A.Q</a>
			<a class="mdl-navigation__link" href="https://github.com/matusnovak/fineframework">GitHub</a>
			<a class="mdl-button mdl-button--raised mdl-button--colored" href="md_doc_markdown_download.html">Download</a>
		  </nav>
		</div>
	  </header>
	  <div class="mdl-layout__drawer">
		<span class="mdl-layout-title">FineFramework</span>
		<nav class="mdl-navigation">
			<a class="mdl-navigation__link" href="index.html">Home</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_documentation.html">Documentation</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_tutorials.html">Tutorials</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_examples.html">Examples</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_faq.html">F.A.Q</a>
			<a class="mdl-navigation__link" href="https://github.com/matusnovak/fineframework">GitHub</a>
			<a class="mdl-navigation__link" href="md_doc_markdown_download.html">Download</a>
			<a class="mdl-navigation__link" href="pages.html">All related pages</a>
			<a class="mdl-navigation__link" href="modules.html">All modules</a>
			<a class="mdl-navigation__link" href="bug.html">All bugs</a>
		</nav>
	  </div>
	  <main class="mdl-layout__content">
		<div class="content-padding mdl-color--grey-100">
		<div class="page-content mdl-grid mdl-color--white mdl-shadow--2dp">
		<div style="display: block; width: 100%;"><!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Encode and decode XML </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial will explain how to decode and encode XML structure.</p>
<p><b>The tutorial uses <a class="el" href="classffw_1_1_var.html">ffw::Var</a> which is essential in the following examples. You must read <a href="md_doc_markdown_tutorial-var.html">Var - JSON-like data structure</a> tutorial first!</b></p>
<h3>Decode XML the easy way</h3>
<p>When decoding a XML, values are converted into C++ specific data types:</p>
<ul>
<li>All nested objects (object that has at least one child) are converted into <a class="el" href="classffw_1_1_object.html">ffw::Object</a></li>
<li>An object that has multiple children with a same tag name is converted into <a class="el" href="classffw_1_1_array.html">ffw::Array</a></li>
<li>An object that does not have a child but has at least one attribute is also converted into <a class="el" href="classffw_1_1_object.html">ffw::Object</a></li>
<li>An object that has children (or any kind of content) but also has attributes, all of it will go into <a class="el" href="classffw_1_1_object.html">ffw::Object</a>, explained below</li>
<li>Each value (both attributes and content) are tested if they represent a number (floating point or integer), or if they represent a boolean (true/false). However, in JSON, strings are explicitly encoded with quotes. In XML, that does not exist, so there is no simple way to delect if a value is supposed to be a string or something else. The algorithm tries to detect integers, floats, boolean, and if all that fails, it will mark a given value as string. For example: <code>&lt;value&gt;-123456&lt;/value&gt;</code> is parsed as integer, but <code>&lt;value&gt;0x123456&lt;/value&gt;</code> is treated as string.</li>
</ul>
<p>All values (both attributes such as <code>id="file"</code> and content <code>&lt;id&gt;file&lt;/id&gt;</code> ) are converted into C++ data types using <a class="el" href="classffw_1_1_var.html">ffw::Var</a></p>
<table class="doxtable">
<tr>
<th>XML Value/Node </th><th>C++ data type  </th></tr>
<tr>
<td>&lt;menu&gt;&lt;popup&gt;...&lt;/popup&gt;&lt;/menu&gt; </td><td><a class="el" href="classffw_1_1_object.html">ffw::Object</a> </td></tr>
<tr>
<td>&lt;popup&gt;&lt;a&gt;&lt;/a&gt;&lt;a&gt;&lt;/a&gt;&lt;a&gt;&lt;/a&gt;&lt;/popup&gt; </td><td><a class="el" href="classffw_1_1_array.html">ffw::Array</a> * </td></tr>
<tr>
<td>&lt;value&gt;Any kind of UTF-8 text&lt;/value&gt; </td><td>std::string </td></tr>
<tr>
<td>&lt;value&gt;-123456e+2&lt;/value&gt; </td><td>int </td></tr>
<tr>
<td>&lt;value&gt;-1234.56e+2&lt;/value&gt; </td><td>float </td></tr>
<tr>
<td>&lt;value&gt;true&lt;/value&gt; </td><td>bool </td></tr>
<tr>
<td>&lt;value&gt;null&lt;/value&gt; </td><td>std::nullptr_t </td></tr>
<tr>
<td>&lt;value&gt;&lt;/value&gt; </td><td>std::string ** </td></tr>
</table>
<ul>
<li>* An object that contains multiple child objects with a same tag is converted into <a class="el" href="classffw_1_1_array.html">ffw::Array</a></li>
<li>** Empty node is converted into an empty std::string</li>
</ul>
<p>Decoding can be done as the following:</p>
<div class="fragment"><div class="line"><a class="code" href="classffw_1_1_var.html">ffw::Var</a> xml;</div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  xml = <a class="code" href="group__data.html#ga4493e96b439015195f3adf4f5b892d12">ffw::decodeXml</a>(</div><div class="line">    <span class="stringliteral">&quot;&lt;menu id=\&quot;file\&quot; value=\&quot;File\&quot;&gt;&quot;</span></div><div class="line">      <span class="stringliteral">&quot;&lt;popup&gt;&quot;</span></div><div class="line">        <span class="stringliteral">&quot;&lt;menuitem value=\&quot;New\&quot; onclick=\&quot;CreateNewDoc()\&quot; /&gt;&quot;</span></div><div class="line">        <span class="stringliteral">&quot;&lt;menuitem value=\&quot;Open\&quot; onclick=\&quot;OpenDoc()\&quot; /&gt;&quot;</span></div><div class="line">        <span class="stringliteral">&quot;&lt;menuitem value=\&quot;Close\&quot; onclick=\&quot;CloseDoc()\&quot; /&gt;&quot;</span></div><div class="line">      <span class="stringliteral">&quot;&lt;/popup&gt;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;&lt;/menu&gt;&quot;</span></div><div class="line">  );</div><div class="line">} <span class="keywordflow">catch</span> (<a class="code" href="classffw_1_1_xml_decode_exception.html">ffw::XmlDecodeException</a>&amp; e){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Error while decoding XML: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">  <span class="keywordflow">return</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  <span class="comment">// Check if the root element is an object</span></div><div class="line">  std::cout &lt;&lt; xml.<a class="code" href="classffw_1_1_var.html#ab777c90c26996e4e64522477115b641a">is</a>&lt;<a class="code" href="classffw_1_1_object.html">ffw::Object</a>&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Prints: &quot;1&quot;</span></div><div class="line"></div><div class="line">  <span class="comment">// Access key (returns a reference)</span></div><div class="line">  std::cout &lt;&lt; xml[<span class="stringliteral">&quot;menu&quot;</span>][<span class="stringliteral">&quot;id&quot;</span>].<a class="code" href="classffw_1_1_var.html#a2bf090fcd9d7005424773791ace72fe5">getAs</a>&lt;std::string&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Prints: &quot;file&quot;</span></div><div class="line"></div><div class="line">  <span class="comment">// Exactly same as above, but returns a copy instead</span></div><div class="line">  std::cout &lt;&lt; xml[<span class="stringliteral">&quot;menu&quot;</span>][<span class="stringliteral">&quot;id&quot;</span>].<a class="code" href="classffw_1_1_var.html#aaf0f0aaee62127213953a87e605aa8be">toString</a>() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="comment">// Exactly same as above:</span></div><div class="line">  std::cout &lt;&lt; xml.<a class="code" href="classffw_1_1_var.html#a2bf090fcd9d7005424773791ace72fe5">getAs</a>&lt;<a class="code" href="classffw_1_1_object.html">ffw::Object</a>&gt;()[<span class="stringliteral">&quot;menu&quot;</span>].getAs&lt;ffw::Object&gt;()[<span class="stringliteral">&quot;id&quot;</span>].toString() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// In the previous example, using [&quot;key&quot;] on ffw::Var </span></div><div class="line">  <span class="comment">// will automatically call getAs&lt;ffw::Object&gt;()</span></div><div class="line">  <span class="comment">// Also, using [integer] on ffw::Var will do the same but will cast to ffw::Array</span></div><div class="line"></div><div class="line">  <span class="comment">// Access a chain of keys</span></div><div class="line">  std::cout &lt;&lt; xml[<span class="stringliteral">&quot;menu&quot;</span>][<span class="stringliteral">&quot;popup&quot;</span>][<span class="stringliteral">&quot;menuitem&quot;</span>][2][<span class="stringliteral">&quot;value&quot;</span>].<a class="code" href="classffw_1_1_var.html#a2bf090fcd9d7005424773791ace72fe5">getAs</a>&lt;std::string&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Prints: &quot;Close&quot;</span></div><div class="line"></div><div class="line">  <span class="comment">// Check if a specific value is array (can be used to detect int, float, etc...)</span></div><div class="line">  std::cout &lt;&lt; xml[<span class="stringliteral">&quot;menu&quot;</span>][<span class="stringliteral">&quot;popup&quot;</span>][<span class="stringliteral">&quot;menuitem&quot;</span>].<a class="code" href="classffw_1_1_var.html#ab777c90c26996e4e64522477115b641a">is</a>&lt;<a class="code" href="classffw_1_1_array.html">ffw::Array</a>&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Prints: &quot;1&quot;</span></div><div class="line"></div><div class="line">  <span class="comment">// Get a reference for easier access</span></div><div class="line">  <a class="code" href="classffw_1_1_array.html">ffw::Array</a>&amp; arr = xml[<span class="stringliteral">&quot;menu&quot;</span>][<span class="stringliteral">&quot;popup&quot;</span>][<span class="stringliteral">&quot;menuitem&quot;</span>].<a class="code" href="classffw_1_1_var.html#a2bf090fcd9d7005424773791ace72fe5">getAs</a>&lt;<a class="code" href="classffw_1_1_array.html">ffw::Array</a>&gt;();</div><div class="line">  <span class="comment">// Would throw std::bad_cast if the menuitem is an object instead</span></div><div class="line"></div><div class="line">  <span class="comment">// Access a value from arr</span></div><div class="line">  std::cout &lt;&lt; arr[2][<span class="stringliteral">&quot;value&quot;</span>].getAs&lt;std::string&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Prints: &quot;Close&quot;</span></div><div class="line"></div><div class="line">  <span class="comment">// Access an incorrect data type from arr</span></div><div class="line">  std::cout &lt;&lt; arr[2][<span class="stringliteral">&quot;value&quot;</span>].getAs&lt;<span class="keywordtype">int</span>&gt;() &lt;&lt; std::endl;</div><div class="line">  <span class="comment">// Throws std::bad_cast</span></div><div class="line">  <span class="comment">// Why? because 2nd menuitem&#39;s</span></div><div class="line">  <span class="comment">// &quot;value&quot; inside of &lt;menuitem value=&quot;Open&quot; onclick=&quot;OpenDoc()&quot; /&gt;</span></div><div class="line">  <span class="comment">// is not an integer!</span></div><div class="line"></div><div class="line">  <span class="comment">// To use exceptions while getting keys, use at(&quot;key&quot;)</span></div><div class="line">  <span class="comment">// Throws std::out_of_range !!!!!</span></div><div class="line">  std::cout &lt;&lt; xml.<a class="code" href="classffw_1_1_var.html#a2bf090fcd9d7005424773791ace72fe5">getAs</a>&lt;<a class="code" href="classffw_1_1_object.html">ffw::Object</a>&gt;().at(<span class="stringliteral">&quot;menu&quot;</span>).getAs&lt;<a class="code" href="classffw_1_1_object.html">ffw::Object</a>&gt;().at(<span class="stringliteral">&quot;invalid&quot;</span>).getAs&lt;std::string&gt;() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">} <span class="keywordflow">catch</span> (std::exception&amp; e){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Something went wrong while accessing data: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>Please note:</p>
<ul>
<li>If the decoding fails, an <a class="el" href="classffw_1_1_xml_decode_exception.html">ffw::XmlDecodeException</a> is thrown</li>
<li>The [] operator with std::string assumes that you are trying to get <a class="el" href="classffw_1_1_object.html">ffw::Object</a></li>
<li>The [] operator with int assumes that you are trying to get <a class="el" href="classffw_1_1_array.html">ffw::Array</a></li>
</ul>
<h3>Encode XML the wasy way</h3>
<p>The following code is a simple way to create a data structure using <a class="el" href="classffw_1_1_var.html">ffw::Var</a> and encoding it as XML. Note that an exception can be thrown if:</p>
<ul>
<li>the root node of the data structure is not object, XML has to start with an object!</li>
<li>any of the values contain invalid data type, only the following are valid: (<a class="el" href="classffw_1_1_object.html">ffw::Object</a>, <a class="el" href="classffw_1_1_array.html">ffw::Array</a>, any signed or unsigned integer, bool, std::string or const char*, any floating point). For example, you can not encode a C++ reference, or pointer, or class, etc...</li>
</ul>
<div class="fragment"><div class="line"><a class="code" href="classffw_1_1_object.html">ffw::Object</a> obj = { </div><div class="line">  <span class="stringliteral">&quot;menu&quot;</span>, <a class="code" href="classffw_1_1_object.html">ffw::Object</a>{</div><div class="line">    {<span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;file&quot;</span>,},</div><div class="line">    {<span class="stringliteral">&quot;value&quot;</span>, <span class="stringliteral">&quot;File&quot;</span>,},</div><div class="line">    {<span class="stringliteral">&quot;popup&quot;</span>, <a class="code" href="classffw_1_1_object.html">ffw::Object</a>{</div><div class="line">      {<span class="stringliteral">&quot;menuitem&quot;</span>, <a class="code" href="classffw_1_1_array.html">ffw::Array</a>{</div><div class="line">        <a class="code" href="classffw_1_1_object.html">ffw::Object</a>{{<span class="stringliteral">&quot;value&quot;</span>, <span class="stringliteral">&quot;New&quot;</span>}, {<span class="stringliteral">&quot;onclick&quot;</span>, <span class="stringliteral">&quot;CreateNewDoc()&quot;</span>}},</div><div class="line">        <a class="code" href="classffw_1_1_object.html">ffw::Object</a>{{<span class="stringliteral">&quot;value&quot;</span>, <span class="stringliteral">&quot;Open&quot;</span>}, {<span class="stringliteral">&quot;onclick&quot;</span>, <span class="stringliteral">&quot;OpenDoc()&quot;</span>}},</div><div class="line">        <a class="code" href="classffw_1_1_object.html">ffw::Object</a>{{<span class="stringliteral">&quot;value&quot;</span>, <span class="stringliteral">&quot;Close&quot;</span>}, {<span class="stringliteral">&quot;onclick&quot;</span>, <span class="stringliteral">&quot;CloseDoc()&quot;</span>}}</div><div class="line">      }},</div><div class="line">    }},</div><div class="line">  } </div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  std::string str = <a class="code" href="group__data.html#ga28e1ffa5d6591cb447ce6096e75c60f8">ffw::encodeXml</a>(obj, <span class="stringliteral">&quot;    &quot;</span>, <span class="keyword">false</span>);</div><div class="line">  <span class="comment">// If you wish to create compact XML (no new lines, no indent)</span></div><div class="line">  <span class="comment">// pass NULL as a second parameter!</span></div><div class="line">  <span class="comment">// To escape UTF-8 into unicode &amp;#xXXXX; symbols, pass &#39;true&#39;</span></div><div class="line">  <span class="comment">// as a third parameter</span></div><div class="line"></div><div class="line">} <span class="keywordflow">catch</span> (<a class="code" href="classffw_1_1_xml_encode_exception.html">ffw::XmlEncodeException</a>&amp; e){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Something went wrong: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>Will create the following equivalent XML structure:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;<span class="keywordtype">menu</span>&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &lt;<span class="keywordtype">id</span>&gt;<span class="keyword">file</span>&lt;/<span class="keywordtype">id</span>&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;<span class="keywordtype">value</span>&gt;<span class="keyword">File</span>&lt;/<span class="keywordtype">value</span>&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &lt;<span class="keywordtype">popup</span>&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &lt;<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;            &lt;<span class="keywordtype">value</span>&gt;<span class="keyword">New</span>&lt;/<span class="keywordtype">value</span>&gt;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &lt;<span class="keywordtype">onclick</span>&gt;<span class="keyword">CreateNewDoc</span>()&lt;/<span class="keywordtype">onclick</span>&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        &lt;/<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        &lt;<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;            &lt;<span class="keywordtype">value</span>&gt;<span class="keyword">Open</span>&lt;/<span class="keywordtype">value</span>&gt;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            &lt;<span class="keywordtype">onclick</span>&gt;<span class="keyword">OpenDoc</span>()&lt;/<span class="keywordtype">onclick</span>&gt;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        &lt;/<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        &lt;<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;            &lt;<span class="keywordtype">value</span>&gt;<span class="keyword">Close</span>&lt;/<span class="keywordtype">value</span>&gt;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            &lt;<span class="keywordtype">onclick</span>&gt;<span class="keyword">CloseDoc</span>()&lt;/<span class="keywordtype">onclick</span>&gt;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        &lt;/<span class="keywordtype">menuitem</span>&gt;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    &lt;/<span class="keywordtype">popup</span>&gt;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;&lt;/<span class="keywordtype">menu</span>&gt;</div></div><!-- fragment --><h3>Decode XML the complicated way</h3>
<p>With this method, you can decode XML by step by step without using <a class="el" href="classffw_1_1_var.html">ffw::Var</a> at all. It grants you the freedom you need. Any of the following commands (including constructor!) can throw <a class="el" href="classffw_1_1_xml_decode_exception.html">ffw::XmlDecodeException</a> at any time if the XML string is broken in any way. Exception is thrown if:</p>
<ul>
<li>XML syntax error</li>
<li>trying to cast from into c++ data type when the XML value is something completely else (for example, XML value is clearly a string: &lt;ket&gt;Something&lt;/key&gt; but you try to use node.toInt() when clearly node.isInt() gives you false)</li>
</ul>
<p>Also, note that there is difference between integer, number, float:</p>
<ul>
<li><a class="el" href="classffw_1_1_xml_reader_1_1_value.html#a36dda67412b32e89b83cc75758910deb">ffw::XmlReader::Node::isNumber</a> returns true if the XML value is any kind of number (integer or float)</li>
<li><a class="el" href="classffw_1_1_xml_reader_1_1_value.html#abcdcbc4a9b81475405032bfb025b14f3">ffw::XmlReader::Node::isInteger</a> returns true if the number is not floating point (no decimal point)</li>
<li><a class="el" href="classffw_1_1_xml_reader_1_1_value.html#afba3f88e31c74423852dba3ff2e588c0">ffw::XmlReader::Node::isFloat</a> returns true if the number is floating point (has decimal point)</li>
</ul>
<p>Also, note that <a class="el" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">ffw::XmlReader::Node::isString</a> returns always true, (but returns false if isEmptr() returns true!) even if toInteger returns true. This is due to the reason that in XML strings are not explicitly written (in syntax form) compared to JSON where we can exactly tell the value is a string.</p>
<div class="fragment"><div class="line"><a class="code" href="classffw_1_1_xml_reader.html">ffw::XmlReader</a> xml(</div><div class="line">  <span class="stringliteral">&quot;&lt;menu id=\&quot;file\&quot; value=\&quot;\&quot;&gt;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;&lt;popup&gt;&quot;</span></div><div class="line">      <span class="stringliteral">&quot;&lt;menuitem value=\&quot;New\&quot; onclick=\&quot;CreateNewDoc()\&quot; /&gt;&quot;</span></div><div class="line">      <span class="stringliteral">&quot;&lt;menuitem value=\&quot;Open\&quot; onclick=\&quot;OpenDoc()\&quot; /&gt;&quot;</span></div><div class="line">      <span class="stringliteral">&quot;&lt;menuitem value=\&quot;Close\&quot; onclick=\&quot;CloseDoc()\&quot; /&gt;&quot;</span></div><div class="line">    <span class="stringliteral">&quot;&lt;/popup&gt;&quot;</span></div><div class="line">  <span class="stringliteral">&quot;&lt;/menu&gt;&quot;</span></div><div class="line">);</div><div class="line"></div><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  <a class="code" href="classffw_1_1_xml_reader_1_1_node.html">ffw::XmlReader::Node</a> node;</div><div class="line">  <a class="code" href="classffw_1_1_xml_reader_1_1_attribute.html">ffw::XmlReader::Attribute</a> attr;</div><div class="line"></div><div class="line">  <span class="comment">// Get &quot;menu&quot;</span></div><div class="line">  xml.getNext(&amp;node);</div><div class="line">  std::cout &lt;&lt; node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#ae3a30bac0b014df45a1d7e6722d90773">name</a>() &lt;&lt; std::endl; <span class="comment">// Prints &quot;menu&quot;</span></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#a7b426046792bf29a03198846ff487d98">hasAttributes</a>(); <span class="comment">// Returns true</span></div><div class="line"></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#acbb9f6e71063d65b161427d9609720ba">getNextAttribute</a>(&amp;attr);</div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">isString</a>(); <span class="comment">// Returns true</span></div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#a7f6c69a6afd6d166e6a7060cc85f686d">isEmpty</a>(); <span class="comment">// Returns false</span></div><div class="line">  std::cout &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_attribute.html#a0720eec1ad6f286ca1c93b1c061d2801">name</a>() &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#aac5994ffef325c9acb59161fdd5db891">toString</a>() &lt;&lt; std::endl; </div><div class="line">  <span class="comment">// Prints &quot;id=file&quot;</span></div><div class="line"></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#acbb9f6e71063d65b161427d9609720ba">getNextAttribute</a>(&amp;attr);</div><div class="line">  std::cout &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#a7f6c69a6afd6d166e6a7060cc85f686d">isEmpty</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">isString</a>() &lt;&lt; std::endl;</div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">isString</a>(); <span class="comment">// Returns false</span></div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#a7f6c69a6afd6d166e6a7060cc85f686d">isEmpty</a>(); <span class="comment">// Returns true</span></div><div class="line"></div><div class="line">  <span class="comment">// Go inside of &quot;menu&quot;</span></div><div class="line">  xml.stepInto(&amp;node);</div><div class="line"></div><div class="line">  <span class="comment">// Find &quot;popup&quot;</span></div><div class="line">  xml.getNext(&amp;node);</div><div class="line">  std::cout &lt;&lt; node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#ae3a30bac0b014df45a1d7e6722d90773">name</a>() &lt;&lt; std::endl; <span class="comment">// Prints &quot;popup&quot;</span></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#af5855e40022c69c4d8bd44c2b9c935e7">isObject</a>(); <span class="comment">// Returns true because it has many child nodes</span></div><div class="line"></div><div class="line">  <span class="comment">// Go inside of &quot;popup&quot;</span></div><div class="line">  xml.stepInto(&amp;node);</div><div class="line"></div><div class="line">  <span class="comment">// Find first &quot;menuitem&quot;</span></div><div class="line">  xml.getNext(&amp;node);</div><div class="line">  std::cout &lt;&lt; node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#ae3a30bac0b014df45a1d7e6722d90773">name</a>() &lt;&lt; std::endl; <span class="comment">// Prints &quot;menuitem&quot;</span></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#af5855e40022c69c4d8bd44c2b9c935e7">isObject</a>(); <span class="comment">// Returns false, no child nodes</span></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#a7f6c69a6afd6d166e6a7060cc85f686d">isEmpty</a>(); <span class="comment">// Returns true, does not contain anything</span></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#a7b426046792bf29a03198846ff487d98">hasAttributes</a>(); <span class="comment">// Returns true, the node has 2 attributes</span></div><div class="line"></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#acbb9f6e71063d65b161427d9609720ba">getNextAttribute</a>(&amp;attr);</div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">isString</a>(); <span class="comment">// Returns true</span></div><div class="line">  std::cout &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_attribute.html#a0720eec1ad6f286ca1c93b1c061d2801">name</a>() &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#aac5994ffef325c9acb59161fdd5db891">toString</a>() &lt;&lt; std::endl; </div><div class="line">  <span class="comment">// Prints &quot;value=New&quot;</span></div><div class="line"></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#acbb9f6e71063d65b161427d9609720ba">getNextAttribute</a>(&amp;attr);</div><div class="line">  attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#ab9a86e3bac0e4f2031a12c41e63d170f">isString</a>(); <span class="comment">// Returns true</span></div><div class="line">  std::cout &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_attribute.html#a0720eec1ad6f286ca1c93b1c061d2801">name</a>() &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; attr.<a class="code" href="classffw_1_1_xml_reader_1_1_value.html#aac5994ffef325c9acb59161fdd5db891">toString</a>() &lt;&lt; std::endl; </div><div class="line">  <span class="comment">// Prints &quot;onclick=CreateNewDoc()&quot;</span></div><div class="line"></div><div class="line">  node.<a class="code" href="classffw_1_1_xml_reader_1_1_node.html#acbb9f6e71063d65b161427d9609720ba">getNextAttribute</a>(&amp;attr); <span class="comment">// Returns false, no another attribute</span></div><div class="line">  <span class="comment">// attr remains unmodified!</span></div><div class="line"></div><div class="line">  <span class="comment">// Go back into the parent node</span></div><div class="line">  xml.stepOut();</div><div class="line"></div><div class="line">  <span class="comment">// Find second &quot;menuitem&quot;</span></div><div class="line">  xml.getNext(&amp;node);</div><div class="line"></div><div class="line">  <span class="comment">// Find third (last) &quot;menuitem&quot;</span></div><div class="line">  xml.getNext(&amp;node);</div><div class="line"></div><div class="line">  xml.getNext(&amp;node); <span class="comment">// Returns false, no more neighbour nodes</span></div><div class="line">} <span class="keywordflow">catch</span> (<a class="code" href="classffw_1_1_xml_encode_exception.html">ffw::XmlEncodeException</a>&amp; e){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Something went wrong: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><h3>Encode XML the complicated way</h3>
<p>This method si very similar to the one above and again, it does not use <a class="el" href="classffw_1_1_var.html">ffw::Var</a> at all. An exception is thrown if:</p>
<ul>
<li>xml tag name is invalid</li>
<li>you call xml.stepOut() too many times</li>
<li>you do not call xml.beginContent() before adding new object</li>
<li>when there has been an error with the stream</li>
</ul>
<p><a class="el" href="classffw_1_1_xml_writer.html">ffw::XmlWriter</a> supports arbitary stream, you can create one based on <a class="el" href="classffw_1_1_xml_writer_1_1_stream.html">ffw::XmlWriter::Stream</a> when you override one simple method. However, <a class="el" href="classffw_1_1_xml_writer_1_1_string_stream.html">ffw::XmlWriter::StringStream</a> and <a class="el" href="classffw_1_1_xml_writer_1_1_file_stream.html">ffw::XmlWriter::FileStream</a> are provided to you.</p>
<div class="fragment"><div class="line"><span class="keywordflow">try</span> {</div><div class="line">  <a class="code" href="classffw_1_1_xml_writer_1_1_string_stream.html">ffw::XmlWriter::StringStream</a> stream;</div><div class="line">  <a class="code" href="classffw_1_1_xml_writer.html">ffw::XmlWriter</a> xml(&amp;stream, <span class="stringliteral">&quot;    &quot;</span>, <span class="keyword">false</span>);</div><div class="line">  <span class="comment">// If you wish to create compact XML (no new lines, no indent)</span></div><div class="line">  <span class="comment">// pass NULL as a second parameter!</span></div><div class="line">  <span class="comment">// To escape UTF-8 into unicode &amp;#xXXXX; symbols, pass &#39;true&#39;</span></div><div class="line">  <span class="comment">// as a third parameter</span></div><div class="line"></div><div class="line">  <span class="comment">// Constructs &lt;menu&gt; with two attributes</span></div><div class="line">  xml.addObject(<span class="stringliteral">&quot;menu&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;file&quot;</span>, <span class="stringliteral">&quot;id&quot;</span>);</div><div class="line">  <span class="comment">// Ensures that the &lt;menu&gt; tag is properly closed!</span></div><div class="line">  xml.beginContent();</div><div class="line">  xml.addString(<span class="stringliteral">&quot;File&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">// Constructs &lt;popup&gt; tag</span></div><div class="line">  xml.addObject(<span class="stringliteral">&quot;popup&quot;</span>);</div><div class="line">  xml.beginContent();</div><div class="line"></div><div class="line">  <span class="comment">// Constricts first &lt;menuitem&gt; tag</span></div><div class="line">  xml.addObject(<span class="stringliteral">&quot;menuitem&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;New&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;CreateNewDoc()&quot;</span>, <span class="stringliteral">&quot;onclick&quot;</span>);</div><div class="line">  xml.stepOut();</div><div class="line"></div><div class="line">  <span class="comment">// Constricts second &lt;menuitem&gt; tag</span></div><div class="line">  xml.addObject(<span class="stringliteral">&quot;menuitem&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;Open&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;OpenDoc()&quot;</span>, <span class="stringliteral">&quot;onclick&quot;</span>);</div><div class="line">  xml.stepOut();</div><div class="line"></div><div class="line">  <span class="comment">// Constricts third &lt;menuitem&gt; tag</span></div><div class="line">  xml.addObject(<span class="stringliteral">&quot;menuitem&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;Close&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);</div><div class="line">  xml.addString(<span class="stringliteral">&quot;CloseDoc()&quot;</span>, <span class="stringliteral">&quot;onclick&quot;</span>);</div><div class="line">  xml.stepOut();</div><div class="line"></div><div class="line">  <span class="comment">// Ends &lt;popup&gt; tag</span></div><div class="line">  xml.stepOut();</div><div class="line">  <span class="comment">// Ends &lt;menu&gt; tag</span></div><div class="line">  xml.stepOut();</div><div class="line">  <span class="comment">// We are done!</span></div><div class="line"></div><div class="line">  <span class="comment">// Any further call to xml.stepOut() would result in exception</span></div><div class="line"></div><div class="line">  std::cout &lt;&lt; stream.<a class="code" href="classffw_1_1_xml_writer_1_1_string_stream.html#ace8ef754d1573f4e4f304052e6d8bd1a">get</a>() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">} <span class="keywordflow">catch</span> (<a class="code" href="classffw_1_1_xml_encode_exception.html">ffw::XmlEncodeException</a>&amp; e){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;Something went wrong: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>Creates the following XML structure:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;<span class="keywordtype">menu</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;file&quot;</span>&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &lt;<span class="keywordtype">value</span>&gt;<span class="keyword">File</span>&lt;/<span class="keywordtype">value</span>&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;<span class="keywordtype">popup</span>&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        &lt;<span class="keywordtype">menuitem</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;New&quot;</span> <span class="keyword">onclick</span>=<span class="stringliteral">&quot;CreateNewDoc()&quot;</span>/&gt;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        &lt;<span class="keywordtype">menuitem</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Open&quot;</span> <span class="keyword">onclick</span>=<span class="stringliteral">&quot;OpenDoc()&quot;</span>/&gt;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &lt;<span class="keywordtype">menuitem</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Close&quot;</span> <span class="keyword">onclick</span>=<span class="stringliteral">&quot;CloseDoc()&quot;</span>/&gt;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    &lt;/<span class="keywordtype">popup</span>&gt;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;&lt;/<span class="keywordtype">menu</span>&gt;</div></div><!-- fragment --> </div></div><!-- contents -->
			</div>
			</div>
			<footer class="mdl-mega-footer">
			  <div class="mdl-mega-footer--middle-section mdl-grid">
				<div class="mdl-mega-footer--drop-down-section">
				  <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked="">
				  <h1 class="mdl-mega-footer--heading">Features</h1>
				  <ul class="mdl-mega-footer--link-list">
					<li><a href="index.html">Home</a></li>
					<li><a href="md_doc_markdown_documentation.html">Documentation</a></li>
					<li><a href="md_doc_markdown_examples.html">Examples</a></li>
					<li><a href="pages.html">All Pages</a></li>
				  </ul>
				</div>
				<div class="mdl-mega-footer--drop-down-section">
				  <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked="">
				  <h1 class="mdl-mega-footer--heading">Details</h1>
				  <ul class="mdl-mega-footer--link-list">
					<li><a href="md_doc_markdown_documentation.html">Documentation</a></li>
					<li><a href="modules.html">Modules</a></li>
					<li><a href="classes.html">Classes</a></li>
					<li><a href="files.html">Files</a></li>
					<li><a href="annotated.html">Class Hierarchy</a></li>
					<li><a href="md_doc_markdown_faq.html">F.A.Q</a></li>
				  </ul>
				</div>
				<div class="mdl-mega-footer--drop-down-section">
				  <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked="">
				  <h1 class="mdl-mega-footer--heading">Installation</h1>
				  <ul class="mdl-mega-footer--link-list">
				    <li><a href="md_doc_markdown_download.html">Download</a></li>
					<li><a href="md_doc_markdown_tutorial-visualstudio-2015.html">Visual Studio 2015</a></li>
					<li><a href="md_doc_markdown_tutorial-visualstudio-2013.html">Visual Studio 2013</a></li>
					<li><a href="md_doc_markdown_tutorial-codeblocks.html">Code Blocks - MinGW</a></li>
					<li><a href="md_doc_markdown_tutorial-linux.html">Linux GCC</a></li>
					<li><a href="md_doc_markdown_tutorial-osx.html">Clang OSX</a></li>
				  </ul>
				</div>
				<div class="mdl-mega-footer--drop-down-section">
				  <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked="">
				  <h1 class="mdl-mega-footer--heading">GitHub</h1>
				  <ul class="mdl-mega-footer--link-list">
					<li><a href="https://github.com/matusnovak/fineframework/archive/master.zip">Source Code</a></li>
					<li><a href="https://github.com/matusnovak/fineframework/releases">Releases</a></li>
					<li><a href="https://github.com/matusnovak/fineframework/issues">Comments/Issues</a></li>
				  </ul>
				</div>
			  </div>
			  <div class="mdl-mega-footer--bottom-section mdl-grid">
				<ul class="mdl-mega-footer--link-list">
				  <li><a href="https://github.com/matusnovak/fineframework/blob/master/LICENSE">Licensed under The MIT License</a></li>
				</ul>
			  </div>
			</footer>
		</main>
	</div>
</body>
</html>