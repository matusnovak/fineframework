<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="FineFramework (FFW) is an open source framework written in C++ designed for developing applications." />
		<meta name="author" content="Matus Novak">
		<link rel="icon" href="favicon.ico">
		<title>FineFramework - Documentation</title>
		<!-- Bootstrap core CSS -->
		<link href="bootstrap.css" rel="stylesheet">
		<!-- Custom styles for this template -->
		<link href="docs.css" rel="stylesheet">
		<script type="text/javascript" src="jquery.min.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
	</head>
	<body>
		<nav class="navbar sticky-top navbar-toggleable-md navbar-light bg-faded">
		<div class="container">
		  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>
		  <a class="navbar-brand" href="index.html">
			<img src="logo.png" width="60" height="30" alt="">
		  </a>
		  <div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
			  <li class="nav-item active"><a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a></li>
			  <li class="nav-item"><a class="nav-link" href="modules.html">Documentation</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_tutorials.html">Tutorials</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_examples.html">Examples</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_faq.html">F.A.Q</a></li>
			  <li class="nav-item"><a class="nav-link" href="https://github.com/matusnovak/fineframework">GitHub</a></li>
			</ul>
			<form class="form-inline my-2 my-lg-0">
			  <a class="btn btn-outline-primary" href="md_doc_markdown_download.html" role="button">Download</a>
			</form>
		  </div>
		</div>
		</nav>
		<div class="container" id="main"><div><!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial: Decode CSV </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial will explain how to decode CSV structure.</p>
<p><b>The tutorial uses <a class="el" href="classffw_1_1_var.html">ffw::Var</a> which is essential in the following examples. You must read <a href="md_doc_markdown_tutorial-var.html">Var - JSON-like data structure</a> tutorial first!</b></p>
<p>Make sure you add <code>finedata</code> into your linker and add the following headers into your project:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="math_8h.html">ffw/math.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="data_8h.html">ffw/data.h</a>&gt;</span></div></div><!-- fragment --><h3>Decode CSV with one function</h3>
<div class="fragment"><div class="line"><span class="comment">// Make sure the lines are separated by \n !!!</span></div><div class="line">std::string str =</div><div class="line">    <span class="stringliteral">&quot;Year,Make,Model,length\n\</span></div><div class="line"><span class="stringliteral">    1997,Ford,E350,2.34\n\</span></div><div class="line"><span class="stringliteral">    2000,Mercury,Cougar,2.38&quot;</span>;</div><div class="line"></div><div class="line"><a class="code" href="classffw_1_1_array.html">ffw::Array</a> arr = <a class="code" href="group__data.html#ga3175e907023dd05a990340db32e2e632">ffw::decodeCsv</a>(str);</div><div class="line"><span class="comment">// No exceptions here!</span></div></div><!-- fragment --><p>This will return an <a class="el" href="classffw_1_1_array.html">ffw::Array</a> that contains multiple <a class="el" href="classffw_1_1_array.html">ffw::Array</a> (s).</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; arr.<a class="code" href="classffw_1_1_array.html#a8113df5b52e6b4641f013f9fd2db2a4d">size</a>() &lt;&lt; std::endl;</div></div><!-- fragment --><p>This will print number 3 as there are only 3 lines in the source CSV. it is guaranteed that each element of the <code>arr</code> will contain <a class="el" href="classffw_1_1_array.html">ffw::Array</a> and nothing else!</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; arr[0].<a class="code" href="classffw_1_1_array.html#a8113df5b52e6b4641f013f9fd2db2a4d">size</a>() &lt;&lt; std::endl;</div></div><!-- fragment --><p>This will print number 4 becuase there are 4 items in the first row. Now, to access individual items...</p>
<div class="fragment"><div class="line"><span class="comment">// We do not care about the first row, it&#39;s a header... </span></div><div class="line"><span class="comment">// Most CSV files contain a header</span></div><div class="line"></div><div class="line"><span class="comment">// Returns false becuase the &quot;1997&quot; is not a string</span></div><div class="line">arr[1][0].is&lt;std::string&gt;(); <span class="comment">// arr[1][0].isString(); also works!</span></div><div class="line"></div><div class="line"><span class="comment">// This returns true:</span></div><div class="line">arr[1][0].is&lt;<span class="keywordtype">int</span>&gt;(); <span class="comment">// arr[1][0].isInt(); also works!</span></div><div class="line"></div><div class="line"><span class="comment">// Prints &quot;Cougar length: 2.38&quot;</span></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Cougar length: &quot;</span> &lt;&lt; arr[2][3].getAs&lt;<span class="keywordtype">float</span>&gt;() &lt;&lt; std::endl;</div><div class="line"></div><div class="line"><span class="comment">// However, this will throw std::bad_cast</span></div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Cougar length: &quot;</span> &lt;&lt; arr[2][3].getAs&lt;<span class="keywordtype">int</span>&gt;() &lt;&lt; std::endl;</div></div><!-- fragment --><p>Why the following two lines below are equal?</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; arr[2].getAs&lt;<a class="code" href="classffw_1_1_array.html">ffw::Array</a>&gt;()[3].getAs&lt;float&gt;() &lt;&lt; std::endl;</div><div class="line">std::cout &lt;&lt; arr[2][3].getAs&lt;<span class="keywordtype">float</span>&gt;() &lt;&lt; std::endl;</div></div><!-- fragment --><p>In the first line, <code>arr</code> is already <a class="el" href="classffw_1_1_array.html">ffw::Array</a>. However, <a class="el" href="classffw_1_1_array.html">ffw::Array</a> holds <a class="el" href="classffw_1_1_var.html">ffw::Var</a> which can hold any c++ data type. We know that <a class="el" href="group__data.html#ga3175e907023dd05a990340db32e2e632">ffw::decodeCsv</a> returns array of arrays, so it is safe to explicitly call <code>getAs&lt;<a class="el" href="classffw_1_1_array.html">ffw::Array</a>&gt;()</code>. The <code>[3]</code> returns 4th element and <code>getAs&lt;float&gt;()</code> gives us a reference to the float.</p>
<p>The second line does exactly same thing. The <a class="el" href="classffw_1_1_var.html">ffw::Var</a> contains two [ ] operators, one for integers, one for strings. If you call the operator with an integer, it will assume you are trying to get <a class="el" href="classffw_1_1_array.html">ffw::Array</a> and it will call <code>getAs&lt;<a class="el" href="classffw_1_1_array.html">ffw::Array</a>&gt;()</code> and <code>[int]</code> at the same time for you... it's just for simplicitly. If you would put a string inside the [ ] operator, it will call <code>getAs&lt;<a class="el" href="classffw_1_1_object.html">ffw::Object</a>&gt;()</code> which throws std::bad_cast because in this example we are dealing with arrays only, no objects.</p>
<h3>Decode CSV line by line</h3>
<div class="fragment"><div class="line"><a class="code" href="classffw_1_1_array.html">ffw::Array</a> output;</div><div class="line"><a class="code" href="classffw_1_1_csv_loader.html">ffw::CsvLoader</a> loader;</div><div class="line"></div><div class="line"><span class="comment">// First param: file path</span></div><div class="line"><span class="comment">// Second param: delimiter (some CSV use ;) default: ,</span></div><div class="line"><span class="comment">// Third param: how are string represented? default: &quot;</span></div><div class="line"><span class="keywordflow">if</span>(!loader.<a class="code" href="classffw_1_1_csv_loader.html#aaa731ca6c8edd7325f1be9125aaaf4cd">openFromFile</a>(<span class="stringliteral">&quot;file.csv&quot;</span>, <span class="charliteral">&#39;,&#39;</span>, <span class="charliteral">&#39;\&quot;&#39;</span>)){</div><div class="line">  std::cerr &lt;&lt; <span class="stringliteral">&quot;File failed to open!&quot;</span> &lt;&lt; std::endl;</div><div class="line">}</div><div class="line"><span class="keywordflow">else</span> {</div><div class="line">  <span class="keywordflow">while</span>(!loader.<a class="code" href="classffw_1_1_csv_loader.html#aee5a58b0d9eee0a0c45a1ae1a8226633">eof</a>()){</div><div class="line">    output = loader.<a class="code" href="classffw_1_1_csv_loader.html#a3021f058a120e4aedf0a892579e3dc8b">getRow</a>(<span class="keyword">true</span>);</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><p>You can also use <code>openFromData</code> which acceps a string instead. The <code>getRow</code> acceps one parameter, a boolean. If you pass true, it will convert all items into their type (integer, float, std::string, bool). If you pass false, no conversion is performed and everything is stored in <a class="el" href="classffw_1_1_array.html">ffw::Array</a> as std::string.</p>
<h3>Decode CSV one line only</h3>
<div class="fragment"><div class="line">std::string str = <span class="stringliteral">&quot;1999,Chevy,\&quot;Venture \&quot;\&quot;Extended Edition, Very Large\&quot;\&quot;\&quot;,,5000.00&quot;</span>;</div><div class="line"><a class="code" href="classffw_1_1_array.html">ffw::Array</a> arr = <a class="code" href="classffw_1_1_csv_loader.html#a2e5bce6f7befc2d8ba38f388c02a8e70">ffw::CsvLoader::tokenize</a>(str, 0, str.size(), <span class="keyword">true</span>, <span class="charliteral">&#39;,&#39;</span>, <span class="charliteral">&#39;\&quot;&#39;</span>);</div></div><!-- fragment --><p>The function (static function!) acceps std::string in which you specify the start and the end. Via the 4th parameter you tell it to either decode (true) values into integers, floats, string, etc... or leave everything (false) into std::string. The 5th and 6th specify how are items separated from each other and how are string expressed. Usually in CSV files the items are separated with a comma and strings are enclosed in quotation marks. </p>
</div></div><!-- contents -->
	</div>
	<script src="tether.min.js"></script>
	<script src="bootstrap.min.js"></script>
	</body>
</html>