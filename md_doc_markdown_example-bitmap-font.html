<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="FineFramework (FFW) is an open source framework written in C++ designed for developing applications." />
		<meta name="author" content="Matus Novak">
		<link rel="icon" href="favicon.ico">
		<title>FineFramework - Documentation</title>
		<!-- Bootstrap core CSS -->
		<link href="bootstrap.css" rel="stylesheet">
		<!-- Custom styles for this template -->
		<link href="docs.css" rel="stylesheet">
		<script type="text/javascript" src="jquery.min.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
	</head>
	<body>
		<nav class="navbar sticky-top navbar-toggleable-md navbar-light bg-faded">
		<div class="container">
		  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>
		  <a class="navbar-brand" href="index.html">
			<img src="logo.png" width="60" height="30" alt="">
		  </a>
		  <div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
			  <li class="nav-item active"><a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a></li>
			  <li class="nav-item"><a class="nav-link" href="modules.html">Documentation</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_tutorials.html">Tutorials</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_examples.html">Examples</a></li>
			  <li class="nav-item"><a class="nav-link" href="md_doc_markdown_faq.html">F.A.Q</a></li>
			  <li class="nav-item"><a class="nav-link" href="https://github.com/matusnovak/fineframework">GitHub</a></li>
			</ul>
			<form class="form-inline my-2 my-lg-0">
			  <a class="btn btn-outline-primary" href="md_doc_markdown_download.html" role="button">Download</a>
			</form>
		  </div>
		</div>
		</nav>
		<div class="container" id="main"><div><!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Example: Bitmap Font </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<img src="example-bitmap-font.jpg" alt="Screenshot"/>
</div>
<p>The purpose of this example is to show capability of loading and rendering a bitmap based font. It's up to the user how they decide to load and fill character data. The code below should be simple enough to understand. Similary to <a href="md_doc_markdown_example-true-type-font.html">True Type Font</a>, this example uses an image instead of an True Type fonts.</p>
<p><b>Requires finegraphics and finemath module to run</b></p>
<p>The following texture is used (in RAW format) as a bitmap font:</p>
<div class="image">
<img src="ubuntu-mono-rgba8.png" alt="Texture"/>
</div>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="graphics_8h.html">ffw/graphics.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><span class="preprocessor">#define NUM_OF_LINES (8)</span></div><div class="line"><span class="preprocessor">#define TEXTURE_SIZE (512*512*4)</span></div><div class="line"></div><div class="line"><span class="comment">// There values are extracted from the image ubuntu-mono-rgba8.raw</span></div><div class="line"><span class="preprocessor">#define CHAR_WIDTH 24</span></div><div class="line"><span class="preprocessor">#define CHAR_HEIGHT 30</span></div><div class="line"><span class="preprocessor">#define CHAR_ADVANCE 16</span></div><div class="line"><span class="preprocessor">#define CHAR_BEARING 23</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> pixels[TEXTURE_SIZE];</div><div class="line"></div><div class="line"><span class="keyword">class </span>App: <span class="keyword">public</span> <a class="code" href="classffw_1_1_g_l_f_w_render_window.html">ffw::GLFWRenderWindow</a> {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    App(){</div><div class="line">    }</div><div class="line"></div><div class="line">    ~App(){</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> <a class="code" href="classffw_1_1_g_l_f_w_render_window.html#a1e282c45acb7d8ce3d1d0c2441f0e2f1">setup</a>()<span class="keyword"> override </span>{</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Window setup!&quot;</span> &lt;&lt; std::endl;</div><div class="line"></div><div class="line">        <span class="comment">// Load ubuntu-mono-rgba8.raw image</span></div><div class="line">        <span class="comment">// We use *.RAW format for the purpose of the example</span></div><div class="line">        std::ifstream input(<span class="stringliteral">&quot;ubuntu-mono-rgba8.raw&quot;</span>, std::ios::in | std::ios::binary);</div><div class="line">        <span class="keywordflow">if</span>(!input) {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to open &#39;ubuntu-mono-rgba8.raw&#39; File is missing?&quot;</span> &lt;&lt; std::endl;</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Check file size</span></div><div class="line">        input.seekg(0, std::ios::end);</div><div class="line">        <span class="keywordtype">size_t</span> size = (size_t)input.tellg();</div><div class="line">        <span class="keywordflow">if</span>(size != TEXTURE_SIZE) {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;File &#39;ubuntu-mono-rgba8.raw&#39; has wrong size! Expected 512x512 pixels RGB_ALPHA_8888!&quot;</span> &lt;&lt; std::endl;</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        memset(pixels, 0xCC, TEXTURE_SIZE);</div><div class="line"></div><div class="line">        <span class="comment">// Load pixels</span></div><div class="line">        input.seekg(0, std::ios::beg);</div><div class="line">        input.read((<span class="keywordtype">char</span>*)pixels, TEXTURE_SIZE);</div><div class="line"></div><div class="line">        <span class="comment">// Load font 28pt at 72 DPI</span></div><div class="line">        <span class="comment">// Chars starting from 0 to 255</span></div><div class="line">        <span class="keywordflow">if</span>(!font.createFromData(<span class="keyword">this</span>, pixels, 512, 512, <a class="code" href="namespaceffw.html#a92226423d9aa0edfe0ca1dde2141e028ac9a466fc5f772161463b424d745c68aa">ffw::ImageType::RGB_ALPHA_8888</a>, 28, 72, 0, 255)){</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to create font from pixel data!&quot;</span> &lt;&lt; std::endl;</div><div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Fill data</span></div><div class="line">        <span class="comment">// Since the font is mono (Ubuntu Mono Regular) then all characters have the same data!</span></div><div class="line">        <span class="comment">// It is up to the user how the data is filled. There is no prefered container/data set!</span></div><div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 256; i++) {</div><div class="line">            <span class="keywordtype">int</span> y = i / 16;</div><div class="line">            <span class="keywordtype">int</span> x = i - (y * 16);</div><div class="line">            font.setCharData((<span class="keywordtype">wchar_t</span>)i, x*32, y*32, CHAR_WIDTH, CHAR_HEIGHT, CHAR_ADVANCE, CHAR_BEARING);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// Required for font blending</span></div><div class="line">        glEnable(GL_BLEND);</div><div class="line">        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);</div><div class="line"></div><div class="line">        <span class="comment">// Background color</span></div><div class="line">        glClearColor(0.9f, 0.9f, 0.9f, 1.0f);</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> <a class="code" href="classffw_1_1_g_l_f_w_render_window.html#a3e6badb607370da3adc99b42f88314ff">render</a>()<span class="keyword"> override </span>{</div><div class="line">        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> height = 0;</div><div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; NUM_OF_LINES; i++){</div><div class="line">            this-&gt;<a class="code" href="classffw_1_1_render_context.html#a0e66661a8494f36744c3043507bb22ee">setDrawColor</a>(<a class="code" href="group__math.html#ga23849e3547e37a5275f6e9d4af0e0948">ffw::rgb</a>(255 - i*(256 / NUM_OF_LINES), i*(256 / NUM_OF_LINES), 0));</div><div class="line">            this-&gt;<a class="code" href="classffw_1_1_render_context.html#ace3899ca386b706a28a692a8ae9dd84b">drawString</a>(10, 10 + height, &amp;font, <span class="stringliteral">&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&quot;</span>);</div><div class="line">            <span class="comment">// Line height is a simple formula of (height * weight)</span></div><div class="line">            <span class="comment">// wehre height is the height of the font</span></div><div class="line">            <span class="comment">// and weight is line spacing (1.0 and more)</span></div><div class="line">            height += int(font.getSizePixels() * 1.5f);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> <a class="code" href="classffw_1_1_g_l_f_w_render_window.html#a05b0b6ad5e81f9f8f8ecaa401c72e7f5">close</a>()<span class="keyword"> override </span>{</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Window is closing!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        font.destroy();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> <a class="code" href="classffw_1_1_g_l_f_w_render_window.html#aae2eaed68878d28c04055b6080ffdbcc">windowCloseEvent</a>()<span class="keyword"> override </span>{</div><div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Window close button pressed!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        this-&gt;<a class="code" href="classffw_1_1_g_l_f_w_render_window.html#a8f82af7870873ad5926f7ed401622aee">shouldClose</a>(<span class="keyword">true</span>);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <a class="code" href="classffw_1_1_bitmap_font.html">ffw::BitmapFont</a> font;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]){</div><div class="line">    <span class="comment">// Instance to our app class</span></div><div class="line">    App app;</div><div class="line"></div><div class="line">    <span class="comment">// set arguments</span></div><div class="line">    <a class="code" href="structffw_1_1_g_l_f_w_render_window_args.html">ffw::GLFWRenderWindowArgs</a> args;</div><div class="line">    args.<a class="code" href="structffw_1_1_g_l_f_w_render_window_args.html#a0d149e540bd88d8e1ae8fe0a0ecb2d22">size</a>.<a class="code" href="structffw_1_1_vec2.html#aeaa66a80cff7ad96023d492d96341d74">set</a>(800, 400);</div><div class="line">    args.<a class="code" href="structffw_1_1_g_l_f_w_render_window_args.html#aa0fa8d1411dbf4f2857007e279738236">title</a> = <span class="stringliteral">&quot;Bitmap Font Example&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// create window</span></div><div class="line">    <span class="keywordflow">if</span>(!app.create(args, NULL)){</div><div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to create window!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Run setup</span></div><div class="line">    <span class="keywordflow">if</span>(!app.setup()){</div><div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Failed to setup window!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        system(<span class="stringliteral">&quot;pause&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// The main window loop</span></div><div class="line">    <span class="keywordflow">while</span>(app.shouldRender()){</div><div class="line">        app.renderFrame();</div><div class="line">        app.poolEvents();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// destroy window, this will delete all graphics data used by the window.</span></div><div class="line">    <span class="comment">// Must be called after the setup and before the graphics</span></div><div class="line">    <span class="comment">// is terminated</span></div><div class="line">    app.destroy();</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
	</div>
	<script src="tether.min.js"></script>
	<script src="bootstrap.min.js"></script>
	</body>
</html>